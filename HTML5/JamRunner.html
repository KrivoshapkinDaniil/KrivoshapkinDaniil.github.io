<!DOCTYPE html>
<html lang="en">
<head>
	<title>JamRunner</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">

	<link href="JamRunner.css" rel="stylesheet">
	<script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>

	<script>
        console.log("Start Program");
		
		vkBridge.send("VKWebAppInit");

		function getUserInfo() {
			vkBridge.send("VKWebAppGetUserInfo", {})
				.then(data => {
					console.log(`ID игрока: ${data.id}`);
				})
				.catch(error => console.log(error));
		}

		function subscribeToEvents() {
            vkBridge.subscribe(e => {
				if (e.detail.type === 'VKWebAppViewHide') {
					console.log('Пользователь закрыл окно приложения');
				}
			});
		}

		getUserInfo();
		subscribeToEvents();
	</script>

</head>
			<body>
				<div class="wrapper" id="mainarea">
					<div class="alert alert-warning centered-axis-xy" style="min-height: 20px; display:none;" role="alert" id="compilingmessage">
						<div id='loadTasks'> </div>
					</div>
					<!-- The "tabindex=0" specifier on the canvas is important to allow it to capture keyboard focus when clicking on it with a mouse -->
					<canvas tabindex=0 id="canvas" class="emscripten" oncontextmenu="event.preventDefault()" style="display:none;">
				</div>
				<div class="row buttonarea text-center" id="buttonrow">
					<div class="col-sm-2 text-center"></div>
					<div class="col-sm-2 text-center"><button type="button" class="btn btn-primary" onclick="try { Module['pauseMainLoop'](); } catch(e) {console.error(e);}">Pause</button></div>
					<div class="col-sm-2 text-center"><button type="button" class="btn btn-primary" onclick="try { Module['resumeMainLoop'](); } catch(e) {console.error(e);}">Resume</button></div>
					<div class="col-sm-2 text-center"><button type="button" class="btn btn-primary" onclick="var w = document.getElementById('logwindow'); w.style.display = w.style.display ? '' : 'none';">Toggle Log</button></div>
					<div class="col-sm-2 text-center"><button type="button" class="btn btn-primary" id='clear_indexeddb' onclick="try { deleteIndexedDBStorage(); } catch(e) {console.error(e);}">Clear IndexedDB</button></div>
					<div class="col-sm-2 text-center"><button type="button" class="btn btn-primary" id="fullscreen_request">FullScreen</button></div>
					<div class="col-sm-2 text-center"></div>
					<div class="col-sm-2 text-center"></div>
				</div>
				<div class="texthalf text-normal jumbotron " id="logwindow" style='display:none'></div>

				<script src="JamRunner.UE4.js"></script>
				    <button onclick="AddToFavourite()">Добавить в избранное!</button>

				<script>
				  function AddToFavourite() {
					console.log("Add to favourite");
					vkBridge.send("VKWebAppAddToFavorites");
				  }
				  
				  function PostGameOnTheWall() {
					console.log("PostGameOnTheWall");
					bridge.send("VKWebAppShowWallPostBox", {
						"message": "Привет! Я хочу рассказать тебе о захватывающей новой игре под названием "Game title"! Это runner-platform от 3-го лица, где тебе предстоит набрать как можно больше очков. В игре ты сможешь испытать свои реакцию и ловкость, а также просто хорошо провести время. Я уже начал играть и я в восторге от нее! Я уверен, что тебе она тоже понравится. Ты можешь попробовать побить мой рекорд и стать лучшим игроком "Game title"! К тому же, если ты пригласишь своих друзей в игру, вы сможете сразиться друг с другом и узнать, кто из вас настоящий чемпион! Не упусти свой шанс стать лучшим - переходи в игру "Game title" и начни играть уже сегодня!",
						"attachments": "https://vk.com/app51636904_271077376"
					});
				  }
				  
				</script>
				
				
				
	</body>
</html>


















